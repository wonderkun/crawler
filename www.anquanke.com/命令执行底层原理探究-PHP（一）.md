> åŸæ–‡é“¾æ¥: https://www.anquanke.com//post/id/226292 


# å‘½ä»¤æ‰§è¡Œåº•å±‚åŸç†æ¢ç©¶-PHPï¼ˆä¸€ï¼‰


                                é˜…è¯»é‡ Â Â 
                                **157443**
                            
                        |
                        
                                                                                                                                    ![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC)
                                                                                            



[![](https://p4.ssl.qhimg.com/t01065e3f9c22565868.jpg)](https://p4.ssl.qhimg.com/t01065e3f9c22565868.jpg)



## å‰è¨€

é’ˆå¯¹ä¸åŒå¹³å°/è¯­è¨€ä¸‹çš„å‘½ä»¤æ‰§è¡Œæ˜¯ä¸ç›¸åŒçš„ï¼Œå­˜åœ¨å¾ˆå¤§çš„å·®å¼‚æ€§ã€‚å› æ­¤ï¼Œè¿™é‡Œå¯¹ä¸åŒå¹³å°/è¯­è¨€ä¸‹çš„å‘½ä»¤æ‰§è¡Œå‡½æ•°è¿›è¡Œæ·±å…¥çš„æ¢ç©¶åˆ†æã€‚

æ–‡ç« å¼€å¤´ä¼šå¯¹ä¸åŒå¹³å°(Linuxã€Windows)ä¸‹ï¼šç»ˆç«¯çš„æŒ‡ä»¤æ‰§è¡Œã€è¯­è¨€(PHPã€Javaã€Python)çš„å‘½ä»¤æ‰§è¡Œè¿›è¡Œä»‹ç»åˆ†æã€‚åé¢ï¼Œä¸»è¦ä»¥PHPè¯­è¨€ä¸ºå¯¹è±¡ï¼Œé’ˆå¯¹ä¸åŒå¹³å°ï¼Œå¯¹å‘½ä»¤æ‰§è¡Œå‡½æ•°è¿›è¡Œåº•å±‚æ·±å…¥åˆ†æï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼šPHPå†…æ ¸æºç çš„ç¼–è¯‘ã€è¿è¡Œã€è°ƒè¯•ã€å®¡è®¡ç­‰ï¼Œå…¶å®ƒè¯­è¨€åˆ†æåŸç†æ€è·¯ç±»ä¼¼ã€‚19

è¯¥ç³»åˆ—åˆ†ææ–‡ç« ä¸»è¦åˆ†ä¸ºå››éƒ¨åˆ†ï¼Œå¦‚ä¸‹ï¼š
- ç¬¬ä¸€éƒ¨åˆ†ï¼šå‘½ä»¤æ‰§è¡Œåº•å±‚åŸç†æ¢ç©¶-PHP (ä¸€)
é’ˆå¯¹ä¸åŒå¹³å°(Linuxã€Windows)ä¸‹ï¼šç»ˆç«¯çš„æŒ‡ä»¤æ‰§è¡Œã€è¯­è¨€(PHPã€Javaã€Python)çš„å‘½ä»¤æ‰§è¡Œè¿›è¡Œä»‹ç»åˆ†æã€‚
- ç¬¬äºŒéƒ¨åˆ†ï¼šå‘½ä»¤æ‰§è¡Œåº•å±‚åŸç†æ¢ç©¶-PHP (äºŒ)
ä¸»è¦ä»¥PHPè¯­è¨€ä¸ºå¯¹è±¡ï¼Œé’ˆå¯¹ä¸åŒå¹³å°ï¼Œè¿›è¡Œç¯å¢ƒå‡†å¤‡ã€PHPå†…æ ¸æºç çš„ç¼–è¯‘ã€è¿è¡Œã€è°ƒè¯•ç­‰ã€‚
- ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‘½ä»¤æ‰§è¡Œåº•å±‚åŸç†æ¢ç©¶-PHP (ä¸‰)
é’ˆå¯¹Windowså¹³å°ä¸‹ï¼ŒPHPå‘½ä»¤æ‰§è¡Œå‡½æ•°çš„åº•å±‚åŸç†åˆ†æã€‚
- ç¬¬å››éƒ¨åˆ†ï¼šå‘½ä»¤æ‰§è¡Œåº•å±‚åŸç†æ¢ç©¶-PHP (å››)
é’ˆå¯¹Linuxå¹³å°ä¸‹ï¼ŒPHPå‘½ä»¤æ‰§è¡Œå‡½æ•°çš„åº•å±‚åŸç†åˆ†æã€‚

æœ¬æ–‡**ã€Š å‘½ä»¤æ‰§è¡Œåº•å±‚åŸç†æ¢ç©¶-PHP (ä¸€) ã€‹**ä¸»è¦è®²è¿°çš„æ˜¯ç¬¬ä¸€éƒ¨åˆ†ï¼šé’ˆå¯¹ä¸åŒå¹³å°(Linuxã€Windows)ä¸‹ï¼šç»ˆç«¯çš„æŒ‡ä»¤æ‰§è¡Œã€è¯­è¨€(PHPã€Javaã€Python)çš„å‘½ä»¤æ‰§è¡Œè¿›è¡Œä»‹ç»åˆ†æã€‚



## å¹³å°è¯­è¨€

### <a class="reference-link" name="%E4%B8%8D%E5%90%8C%E5%B9%B3%E5%8F%B0%E7%BB%88%E7%AB%AF%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C"></a>ä¸åŒå¹³å°ç»ˆç«¯æŒ‡ä»¤æ‰§è¡Œ

ä¸åŒå¹³å°ç»ˆç«¯ä¸­æ‰§è¡Œçš„å‘½ä»¤æ–¹å¼ä¸€èˆ¬æœ‰ä¸¤ç§ï¼šè‡ªèº«ç»ˆç«¯å°è£…çš„æŒ‡ä»¤(å†…ç½®)ã€ç»ˆç«¯ä¸‹è°ƒç”¨å…¶å®ƒç›®å½•ä¸‹çš„å¯æ‰§è¡Œç¨‹åº(å¤–éƒ¨)ã€‚

#### <a class="reference-link" name="Linux"></a>Linux

Linuxä¸‹ç»ˆç«¯ä¸€èˆ¬ä¸º`/bin/bash`ã€`/bin/sh`ã€`/bin/zsh`ç­‰ï¼Œè¿™é‡Œä»¥`bash`ç»ˆç«¯ä¸ºä¾‹æµ‹è¯•ã€‚

ä»¥Linuxä¸ºä¾‹ã€Windowsç­‰å¹³å°åŸç†åŒLinuxç±»ä¼¼ã€‘ï¼ŒLinuxä¸‹ç»ˆç«¯å†…å»º(å†…ç½®)çš„æŒ‡ä»¤ç±»å‹ä¸ºï¼š`shell built-in command`ã€‚

æ‰€è°“`shell built-in command`ï¼Œå°±æ˜¯é‚£äº›å†…å»ºåœ¨`linux shell`é‡Œé¢çš„`command`æŒ‡ä»¤ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨`linux shell`ä¸‹é¢æ‰§è¡Œä¸€ä¸ª`command`æŒ‡ä»¤ï¼Œshellä¼šæŸ¥æ‰¾`command`æ˜¯å¦ä¸º`built-in command`ç±»å‹ï¼Œå¯¹äº`built-in command`æŒ‡ä»¤ç±»å‹ï¼Œshellä¼šè‡ªå·±è§£é‡Šæ‰§è¡Œï¼Œè€Œæ— éœ€forkä¸€ä¸ª`child process`å­è¿›ç¨‹æ¥æ‰§è¡Œè¯¥`command`æŒ‡ä»¤ï¼›å¯¹äºï¼Œä¸æ˜¯`built-in command`æŒ‡ä»¤ç±»å‹ï¼Œshellä¼šä»ç¯å¢ƒå˜é‡ä¸­æŒ‰é¡ºåºæœç´¢è¯¥`command`æŒ‡ä»¤ï¼Œå¦‚æœèƒ½æŸ¥åˆ°åˆ™ä¼šforkä¸€ä¸ª`child process`å­è¿›ç¨‹æ¥æ‰§è¡Œè¯¥`command`æŒ‡ä»¤ï¼›ç„¶è€Œï¼Œå¯¹äºæ‰¾ä¸åˆ°çš„`command`æŒ‡ä»¤ï¼Œä¸€èˆ¬ä¸ºï¼šæ‰§è¡Œçš„æŒ‡ä»¤ä¸å­˜åœ¨ã€æŒ‡ä»¤æœªåŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚

é‚£ä¹ˆå¦‚ä½•è¿›è¡Œç»ˆç«¯å†…å»ºæŒ‡ä»¤çš„åˆ¤æ–­ä¸æŸ¥çœ‹å‘¢ï¼Œå¯¹äºå†…å»ºæŒ‡ä»¤å¯ä»¥ä½¿ç”¨`type`æŒ‡ä»¤å»åˆ¤æ–­

```
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# type echo  
echo is a shell builtin
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# type whoami
whoami is /usr/bin/whoami
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€#
```

æˆ–ç€ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒæŒ‡ä»¤è¿›è¡ŒæŸ¥æ‰¾åˆ¤æ–­ï¼š`whichã€where`

```
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# which echo
echo: shell built-in command
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# which whoami
/usr/bin/whoami
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# 


â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# where echo  
echo: shell built-in command
 echo
/bin/echo
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# where whoami
/usr/bin/whoami
/bin/whoami
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€#
```

æ³¨æ„ï¼šåœ¨Linuxå¹³å°ï¼Œæœ‰äº›å‘½ä»¤è™½ç„¶ä¸ºå†…å»ºå‘½ä»¤ï¼Œä½†æ˜¯ç³»ç»Ÿå…³é”®ç›®å½•ä¹Ÿå­˜åœ¨å…¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚

è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨`enable`æˆ–`help`æŒ‡ä»¤ï¼ŒæŸ¥çœ‹ç»ˆç«¯å†…å»ºçš„æ‰€æœ‰æŒ‡ä»¤
- ç¬¬ä¸€ç§ï¼š`enable`æŒ‡ä»¤
```
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# enable
-
.
:
[
alias
autoload
bg
bindkey
break
builtin
bye
cd
chdir
command
compadd
comparguments
compcall
compctl
compdescribe
compfiles
compgroups
compquote
compset
comptags
comptry
compvalues
continue
declare
dirs
disable
disown
echo
echotc
echoti
emulate
enable
eval
exec
exit
export
false
fc
fg
float
functions
getln
getopts
hash
history
integer
jobs
kill
let
limit
local
log
logout
noglob
popd
print
printf
private
pushd
pushln
pwd
r
read
readonly
rehash
return
sched
set
setopt
shift
source
suspend
test
times
trap
true
ttyctl
type
typeset
ulimit
umask
unalias
unfunction
unhash
unlimit
unset
unsetopt
vared
wait
whence
where
which
zcompile
zformat
zle
zmodload
zparseopts
zregexparse
zstat
zstyle
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€#
```
- ç¬¬äºŒç§ï¼š`help`æŒ‡ä»¤
[![](https://p0.ssl.qhimg.com/t018a0fce2130b2e32d.png)](https://p0.ssl.qhimg.com/t018a0fce2130b2e32d.png)

æ¥ç€å¯¹ç»ˆç«¯ï¼ˆå†…ç½®|å¤–ç½®ï¼‰å‘½ä»¤è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç»ˆç«¯`/bin/zsh`ï¼š
- æµ‹è¯•ï¼š`whoami`æŒ‡ä»¤
å…ˆå¯¹`whoami`æŒ‡ä»¤è¿›è¡Œç±»å‹æ¢æµ‹ä¸æŒ‡ä»¤å®šä½æŸ¥è¯¢

```
# æŒ‡ä»¤æ¢æµ‹ï¼šéå†…ç½®æŒ‡ä»¤
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# type whoami       
whoami is /usr/bin/whoami

â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€#


# æŒ‡ä»¤å®šä½æŸ¥è¯¢ï¼šæœç´¢å‘ç°ç³»ç»Ÿç‰¹æ®Šç›®å½•å­˜åœ¨`whoami`å¯æ‰§è¡Œç¨‹åº
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# where whoami
/usr/bin/whoami
/bin/whoami                                 
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€#
```

æ³¨æ„ï¼š`/bin`ç›®å½•ä¸º`/usr/bin`ç›®å½•çš„é“¾æ¥

ç„¶åï¼Œåœ¨`zsh`ç»ˆç«¯å†™å…¥`Forå¾ªç¯`æ‰§è¡Œ`whoami`æŒ‡ä»¤æŸ¥çœ‹æ˜¯å¦ä¸ºå†…éƒ¨æ‰§è¡Œæˆ–å¤–éƒ¨è°ƒç”¨

```
for n in `{`0..10000000`}`; do whoami ; done
```

å¦ä¸€ä¾§ï¼Œä½¿ç”¨`htop`åŠ¨æ€è¿›ç¨‹ç›‘æ§ç¨‹åºå¯¹è¯¥ç»ˆç«¯è¿›è¡Œç›‘æ§ï¼Œå¯å‘ç°`whoami`æŒ‡ä»¤å¹¶é`zsh`ç»ˆç«¯å†…ç½®å°è£…çš„æŒ‡ä»¤

[![](https://p2.ssl.qhimg.com/t013c2fd3dabb880e96.png)](https://p2.ssl.qhimg.com/t013c2fd3dabb880e96.png)
- æµ‹è¯•ï¼š`echo`æŒ‡ä»¤
åŒæ ·ï¼Œå¯¹`echo`æŒ‡ä»¤è¿›è¡Œç±»å‹æ¢æµ‹ä¸æŒ‡ä»¤å®šä½æŸ¥è¯¢

```
# æŒ‡ä»¤æ¢æµ‹ï¼šå†…ç½®æŒ‡ä»¤
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# type echo     
echo is a shell builtin

â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€#


# æŒ‡ä»¤å®šä½æŸ¥è¯¢ï¼šæœç´¢å‘ç°ç³»ç»Ÿç‰¹æ®Šç›®å½•å­˜åœ¨`echo`å¯æ‰§è¡Œç¨‹åºï¼ŒåŒæ—¶è¿˜å‘ç°å­˜åœ¨`echo: shell built-in command`ã€ç»ˆç«¯å†…ç½®æŒ‡ä»¤ã€‘
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€# where echo   
echo: shell built-in command
/usr/bin/echo
/bin/echo                          
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢]
â””â”€#
```

ç„¶åï¼Œåœ¨`zsh`ç»ˆç«¯å†™å…¥`Forå¾ªç¯`æ‰§è¡Œ`echo`æŒ‡ä»¤æŸ¥çœ‹æ˜¯å¦ä¸ºå†…éƒ¨æ‰§è¡Œæˆ–å¤–éƒ¨è°ƒç”¨

```
for n in `{`0..10000000`}`; do echo 1 ; done
```

å¦ä¸€ä¾§ï¼Œä½¿ç”¨`htop`åŠ¨æ€è¿›ç¨‹ç›‘æ§ç¨‹åºå¯¹è¯¥ç»ˆç«¯è¿›è¡Œç›‘æ§ï¼Œå¯ä»¥å‘ç°`echo`æŒ‡ä»¤ä¸º`zsh`ç»ˆç«¯å†…ç½®å°è£…çš„æŒ‡ä»¤ï¼Œå¹¶æœªå‡ºç°å¤–éƒ¨è°ƒç”¨

[![](https://p3.ssl.qhimg.com/t016fe60db7fc9de8ea.png)](https://p3.ssl.qhimg.com/t016fe60db7fc9de8ea.png)

#### <a class="reference-link" name="Windows"></a>Windows

Windowsä¸‹ç»ˆç«¯ä¸€èˆ¬ä¸º`cmd.exe`ã€`powershell.exe`ç­‰ï¼Œè¿™é‡Œä»¥`cmd`æ¥æµ‹è¯•ã€‚ç»ˆç«¯æŒ‡ä»¤æ‰§è¡ŒåŸç†åŒä¸Šè¿°Linuxè®²è§£åŸç†ç›¸åŒï¼Œåˆ†ä¸ºç»ˆç«¯å†…ç½®æŒ‡ä»¤ä¸å¤–éƒ¨è°ƒç”¨æŒ‡ä»¤ã€‚

é‚£ä¹ˆï¼Œé’ˆå¯¹Windowså¹³å°å¯æ‰§è¡Œç»ˆç«¯ï¼Œå¦‚ä½•è¿›è¡Œç»ˆç«¯å†…å»ºæŒ‡ä»¤çš„åˆ¤æ–­ä¸æŸ¥çœ‹å‘¢ã€‚å¯æƒœWindowså¹³å°ç»ˆç«¯ä¸åƒLinuxç»ˆç«¯å­˜åœ¨ç›¸åº”çš„`type`æŒ‡ä»¤è¿›è¡Œåˆ¤æ–­ä¸`enable`ã€`help`æŒ‡ä»¤æŸ¥çœ‹æ‰€æœ‰å†…å»ºæŒ‡ä»¤ã€‚ä¸è¿‡åœ¨Windowsç»ˆç«¯é‡Œå¯ä»¥å€ŸåŠ©`where`æˆ–`set PATH`æŒ‡ä»¤è¿›è¡ŒæŒ‡ä»¤åˆ¤æ–­ã€‚
- ç¬¬ä¸€ç§ï¼š`where`æŒ‡ä»¤ã€ä¸å¤ªå‹å¥½ã€‘
ä»ç³»ç»Ÿç¯å¢ƒå˜é‡`PATH`é‡Œé¢å®šä½æŸ¥è¯¢ï¼ˆæ³¨æ„äººä¸ºå¢æ·»çš„ç¯å¢ƒå˜é‡çš„å½±å“ï¼‰ï¼Œå¦‚æœèƒ½æŸ¥åˆ°ä¸€èˆ¬æ¥è¯´å¯ä»¥åˆ¤å®šä¸ºå¤–éƒ¨è°ƒç”¨æŒ‡ä»¤ï¼ˆæ’é™¤éç³»ç»Ÿç‰¹æ®Šç›®å½•ï¼‰ï¼Œå¦åˆ™ä¸ºå†…éƒ¨è°ƒç”¨æŒ‡ä»¤ï¼ˆæ’é™¤ä¸å­˜åœ¨æŒ‡ä»¤ï¼‰

```
# å¤–éƒ¨è°ƒç”¨æŒ‡ä»¤
C:\Users\Qftm&gt;where whoami
C:\Windows\System32\whoami.exe
C:\Users\Qftm&gt;

# å†…éƒ¨è°ƒç”¨æŒ‡ä»¤
C:\Users\Qftm&gt;where cd
INFO: Could not find files for the given pattern(s).
C:\Users\Qftm&gt;

# ä¸å­˜åœ¨æŒ‡ä»¤
C:\Users\Qftm&gt;where qftm
INFO: Could not find files for the given pattern(s).
C:\Users\Qftm&gt;

# å†…éƒ¨è°ƒç”¨æŒ‡ä»¤ï¼ˆæ’é™¤äººä¸ºå¢æ·»çš„ç¯å¢ƒå˜é‡çš„å½±å“ï¼‰ï¼ˆæ’é™¤éç³»ç»Ÿç‰¹æ®Šç›®å½•ï¼‰
C:\Users\Qftm&gt;where echo
D:\QSoftware\W3Server\phpstudy2019\Extensions\MySQL5.7.26\bin\echo.exe
C:\Users\Qftm&gt;
```
- ç¬¬äºŒç§ï¼š`set path`æŒ‡ä»¤ã€å‹å¥½ã€‘
å°†ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸´æ—¶è®¾ç½®ä¸º`null`ï¼Œç„¶åå¯¹æŒ‡ä»¤è¿›è¡Œå¸®åŠ©æŸ¥è¯¢ï¼Œå¦‚æœèƒ½æŸ¥åˆ°åˆ™åˆ¤å®šä¸ºå†…ç½®æŒ‡ä»¤ï¼Œå¦åˆ™ä¸ºå¤–éƒ¨è°ƒç”¨ã€‚

```
# pathç½®ç©º
C:\Users\Qftm&gt;set path=
C:\Users\Qftm&gt;path
PATH=(null)
C:\Users\Qftm&gt;

# å†…éƒ¨è°ƒç”¨æŒ‡ä»¤
C:\Users\Qftm&gt;cd /?
Displays the name of or changes the current directory.

CHDIR [/D] [drive:][path]
CHDIR [..]
CD [/D] [drive:][path]
CD [..]

  ..   Specifies that you want to change to the parent directory.

Type CD drive: to display the current directory in the specified drive.
Type CD without parameters to display the current drive and directory.

Use the /D switch to change current drive in addition to changing current
directory for a drive.

If Command Extensions are enabled CHDIR changes as follows:

The current directory string is converted to use the same case as
the on disk names.  So CD C:\TEMP would actually set the current
directory to C:\Temp if that is the case on disk.

CHDIR command does not treat spaces as delimiters, so it is possible to
CD into a subdirectory name that contains a space without surrounding
the name with quotes.  For example:

    cd \winnt\profiles\username\programs\start menu

is the same as:

    cd "\winnt\profiles\username\programs\start menu"

which is what you would have to type if extensions were disabled.
C:\Users\Qftm&gt;

# å¤–éƒ¨è°ƒç”¨æŒ‡ä»¤
C:\Users\Qftm&gt;whoami /?
'whoami' is not recognized as an internal or external command,
operable program or batch file.
C:\Users\Qftm&gt;

# ä¸å­˜åœ¨æŒ‡ä»¤
C:\Users\Qftm&gt;qftm /?
'qftm' is not recognized as an internal or external command,
operable program or batch file.
C:\Users\Qftm&gt;
```

æ³¨æ„ï¼šWindowsä¸‹ç»ˆç«¯`help`æŒ‡ä»¤å¹¶ä¸èƒ½å¤ŸæŸ¥è¯¢ç»ˆç«¯å†…å»ºæŒ‡ä»¤ï¼šé¦–å…ˆ`help`æŒ‡ä»¤ä¸ºå¤–éƒ¨è°ƒç”¨æŒ‡ä»¤ï¼Œç„¶å`help`æŒ‡ä»¤æŸ¥è¯¢å‡ºçš„æ‰€æœ‰æŒ‡ä»¤=(å†…å»ºæŒ‡ä»¤+å¤–éƒ¨æŒ‡ä»¤)

```
# helpï¼šå±äºå¤–éƒ¨æŒ‡ä»¤
C:\Users\Qftm&gt;where help
C:\Windows\System32\help.exe
C:\Users\Qftm&gt;

# helpï¼šå†…å»ºæŒ‡ä»¤+å¤–éƒ¨æŒ‡ä»¤ï¼ˆä¸åŒäºLinuxä¸‹bashç­‰ç»ˆç«¯ï¼‰
C:\Users\Qftm&gt;help
For more information on a specific command, type HELP command-name
ASSOC          Displays or modifies file extension associations.
ATTRIB         Displays or changes file attributes.
BREAK          Sets or clears extended CTRL+C checking.
BCDEDIT        Sets properties in boot database to control boot loading.
CACLS          Displays or modifies access control lists (ACLs) of files.
CALL           Calls one batch program from another.
CD             Displays the name of or changes the current directory.
CHCP           Displays or sets the active code page number.
CHDIR          Displays the name of or changes the current directory.
CHKDSK         Checks a disk and displays a status report.
CHKNTFS        Displays or modifies the checking of disk at boot time.
CLS            Clears the screen.
CMD            Starts a new instance of the Windows command interpreter.
COLOR          Sets the default console foreground and background colors.
COMP           Compares the contents of two files or sets of files.
COMPACT        Displays or alters the compression of files on NTFS partitions.
CONVERT        Converts FAT volumes to NTFS.  You cannot convert the
               current drive.
COPY           Copies one or more files to another location.
DATE           Displays or sets the date.
DEL            Deletes one or more files.
DIR            Displays a list of files and subdirectories in a directory.
DISKPART       Displays or configures Disk Partition properties.
DOSKEY         Edits command lines, recalls Windows commands, and
               creates macros.
DRIVERQUERY    Displays current device driver status and properties.
ECHO           Displays messages, or turns command echoing on or off.
ENDLOCAL       Ends localization of environment changes in a batch file.
ERASE          Deletes one or more files.
EXIT           Quits the CMD.EXE program (command interpreter).
FC             Compares two files or sets of files, and displays the
               differences between them.
FIND           Searches for a text string in a file or files.
FINDSTR        Searches for strings in files.
FOR            Runs a specified command for each file in a set of files.
FORMAT         Formats a disk for use with Windows.
FSUTIL         Displays or configures the file system properties.
FTYPE          Displays or modifies file types used in file extension
               associations.
GOTO           Directs the Windows command interpreter to a labeled line in
               a batch program.
GPRESULT       Displays Group Policy information for machine or user.
GRAFTABL       Enables Windows to display an extended character set in
               graphics mode.
HELP           Provides Help information for Windows commands.
ICACLS         Display, modify, backup, or restore ACLs for files and
               directories.
IF             Performs conditional processing in batch programs.
LABEL          Creates, changes, or deletes the volume label of a disk.
MD             Creates a directory.
MKDIR          Creates a directory.
MKLINK         Creates Symbolic Links and Hard Links
MODE           Configures a system device.
MORE           Displays output one screen at a time.
MOVE           Moves one or more files from one directory to another
               directory.
OPENFILES      Displays files opened by remote users for a file share.
PATH           Displays or sets a search path for executable files.
PAUSE          Suspends processing of a batch file and displays a message.
POPD           Restores the previous value of the current directory saved by
               PUSHD.
PRINT          Prints a text file.
PROMPT         Changes the Windows command prompt.
PUSHD          Saves the current directory then changes it.
RD             Removes a directory.
RECOVER        Recovers readable information from a bad or defective disk.
REM            Records comments (remarks) in batch files or CONFIG.SYS.
REN            Renames a file or files.
RENAME         Renames a file or files.
REPLACE        Replaces files.
RMDIR          Removes a directory.
ROBOCOPY       Advanced utility to copy files and directory trees
SET            Displays, sets, or removes Windows environment variables.
SETLOCAL       Begins localization of environment changes in a batch file.
SC             Displays or configures services (background processes).
SCHTASKS       Schedules commands and programs to run on a computer.
SHIFT          Shifts the position of replaceable parameters in batch files.
SHUTDOWN       Allows proper local or remote shutdown of machine.
SORT           Sorts input.
START          Starts a separate window to run a specified program or command.
SUBST          Associates a path with a drive letter.
SYSTEMINFO     Displays machine specific properties and configuration.
TASKLIST       Displays all currently running tasks including services.
TASKKILL       Kill or stop a running process or application.
TIME           Displays or sets the system time.
TITLE          Sets the window title for a CMD.EXE session.
TREE           Graphically displays the directory structure of a drive or
               path.
TYPE           Displays the contents of a text file.
VER            Displays the Windows version.
VERIFY         Tells Windows whether to verify that your files are written
               correctly to a disk.
VOL            Displays a disk volume label and serial number.
XCOPY          Copies files and directory trees.
WMIC           Displays WMI information inside interactive command shell.

For more information on tools see the command-line reference in the online help.

C:\Users\Qftm&gt;
```

æ¥ç€å¯¹ç»ˆç«¯ï¼ˆå†…ç½®|å¤–ç½®ï¼‰å‘½ä»¤è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç»ˆç«¯`cmd.exe`ï¼š
- æµ‹è¯•ï¼š`whoami`æŒ‡ä»¤
å…ˆå¯¹`whoami`æŒ‡ä»¤è¿›è¡Œç±»å‹æ¢æµ‹ä¸æŒ‡ä»¤å®šä½æŸ¥è¯¢

```
# ç±»å‹æ¢æµ‹ï¼šå¤–éƒ¨è°ƒç”¨æŒ‡ä»¤
# å®šä½æŸ¥è¯¢ï¼šç³»ç»Ÿå¯æ‰§è¡Œç¨‹åº
C:\Users\Qftm&gt;where whoami
C:\Windows\System32\whoami.exe
C:\Users\Qftm&gt;
```

ç„¶åï¼Œåœ¨`cmd`ç»ˆç«¯å†™å…¥`For`å¾ªç¯æ‰§è¡Œ`whoami`æŒ‡ä»¤æŸ¥çœ‹æ˜¯å¦ä¸ºå†…éƒ¨æ‰§è¡Œæˆ–å¤–éƒ¨è°ƒç”¨

```
C:\Users\Qftm&gt;for /l %i in (1,1,1000000) do whoami
```

å¦ä¸€ä¾§ï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†è¿›è¡Œ`cmd`ç»ˆç«¯çš„ç›‘æ§ï¼Œå¯å‘ç°`whoami`æŒ‡ä»¤å¹¶é`cmd.exe`ç»ˆç«¯å†…ç½®å°è£…çš„æŒ‡ä»¤

[![](https://p5.ssl.qhimg.com/t01322eafddbd3938e1.png)](https://p5.ssl.qhimg.com/t01322eafddbd3938e1.png)
- æµ‹è¯•ï¼š`echo`æŒ‡ä»¤
åŒæ ·ï¼Œå¯¹`echo`æŒ‡ä»¤è¿›è¡Œç±»å‹æ¢æµ‹ä¸æŒ‡ä»¤å®šä½æŸ¥è¯¢

```
# ç±»å‹æ¢æµ‹ï¼šå†…éƒ¨è°ƒç”¨æŒ‡ä»¤
# å®šä½æŸ¥è¯¢ï¼šéç³»ç»Ÿå¯æ‰§è¡Œç¨‹åº
C:\Users\Qftm&gt;where echo
D:\QSoftware\W3Server\phpstudy2019\Extensions\MySQL5.7.26\bin\echo.exe
C:\Users\Qftm&gt;
```

ç„¶åï¼Œåœ¨`cmd`ç»ˆç«¯å†™å…¥`For`å¾ªç¯æ‰§è¡Œ`echo`æŒ‡ä»¤æŸ¥çœ‹æ˜¯å¦ä¸ºå†…éƒ¨æ‰§è¡Œæˆ–å¤–éƒ¨è°ƒç”¨

```
for /l %i in (1,1,1000000) do echo 1
```

å¦ä¸€ä¾§ï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†è¿›è¡Œ`cmd`ç»ˆç«¯çš„ç›‘æ§ï¼Œå¯ä»¥å‘ç°`echo`æŒ‡ä»¤ä¸ºç»ˆç«¯å†…ç½®å°è£…çš„æŒ‡ä»¤ï¼Œå¹¶æœªå‡ºç°å¤–éƒ¨è°ƒç”¨

[![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC)](https://p0.ssl.qhimg.com/t01484ace32fa8c0418.png)

### <a class="reference-link" name="%E8%AF%AD%E8%A8%80%E5%B7%AE%E5%BC%82"></a>è¯­è¨€å·®å¼‚

é’ˆå¯¹å‘½ä»¤æ‰§è¡Œå‡½æ•°ï¼Œåº•å±‚å®ç°ä¸Šæ˜¯å¦å­˜åœ¨å‘½ä»¤æ‰§è¡Œç¨‹åº `cmd.exe`ã€`/bin/sh`ã€`/bin/bash` ç­‰ï¼Œå»æ‰§è¡Œå‘½ä»¤æ‰§è¡Œå‡½æ•°ä¼ å…¥çš„å‚æ•°ã€ç³»ç»Ÿå‘½ä»¤ã€‘ã€‚è¿™ä¸ªè¿‡ç¨‹ç›¸å½“äºåº•å±‚æ˜¯å¦å¼•å…¥ç¬¬ä¸‰æ–¹å¯æ‰§è¡Œç»ˆç«¯å»æ‰§è¡Œç›¸åº”å‘½ä»¤ã€‚

æ¯”å¦‚ï¼š`å¯æ‰§è¡Œå‡½æ•°(ç³»ç»Ÿå‘½ä»¤)`

```
CommandExecFunc(echo 111 &gt; shell.txt);  //echoæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº
```

ä¸Šè¿°å‘½ä»¤æ‰§è¡Œå‡½æ•°æ¨¡å‹åœ¨ã€Linuxå¹³å°/windowså¹³å°ã€‘ä¸åŒè¯­è¨€ä¸‹é¢æ‰§è¡Œæ•ˆæœä¸åŒã€‚

#### <a class="reference-link" name="PHP"></a>PHP

```
PHP - åº•å±‚è°ƒç”¨ç³»ç»Ÿç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤     Mode =&gt; Windowï¼šcmd.exe /c Command || Linuxï¼šsh -c Command
```

åœ¨`PHP`è¯­è¨€é‡Œé¢ï¼Œé’ˆå¯¹Linuxå¹³å°ï¼Œç³»ç»Ÿå‘½ä»¤`echo 111 &gt; shell.txt`ä¼ å…¥`CommandExecFunc`å‡½æ•°ï¼Œæœ€ç»ˆåœ¨åº•å±‚ç›¸å½“äºæ‰§è¡Œ`/bin/sh -c echo 111 &gt; shell.txt`ã€‚æˆåŠŸåˆ›å»ºæ–‡ä»¶`shell.txt`ã€æ‰§è¡Œè¿‡ç¨‹ç›¸å½“äºï¼šåœ¨`/bin/sh`ç»ˆç«¯ä¸‹æ‰§è¡Œå‘½ä»¤`echo 111`ï¼Œå¹¶å°†echoç»“æœé€šè¿‡é‡å®šå‘ç¬¦å†™å…¥æ–‡ä»¶`shell.txt`ä¸­ã€‚è¿™é‡Œçš„é‡å®šå‘ç¬¦ä¸æ˜¯echoä¸­çš„å‚æ•°æˆ–å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯åœ¨`/bin/sh`ä¸‹é¢èµ·ç‰¹æ®Šä½œç”¨ã€‚è¿™é‡Œçš„echoå¹¶ä¸æ˜¯å¯æ‰§è¡Œç¨‹åº`/bin/echo`ï¼Œè€Œæ˜¯`/bin/sh`æ‰§è¡Œç»ˆç«¯ä¸­çš„å†…å»ºå‘½ä»¤ã€‘ã€è¿›ç¨‹ç›¸å…³ï¼šä¸€ä¸ªè¿›ç¨‹`/bin/sh`ï¼Œåœ¨`/bin/sh`è¿›ç¨‹ä¸­æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œè€Œä¸æ˜¯æ‰§è¡Œç³»ç»Ÿç¨‹åºã€‘
<li>è·Ÿè¸ªä¸€ä¸‹ç¨‹åºæ‰§è¡Œæµç¨‹ï¼š`For Linux`
</li>
åˆ©ç”¨`strace`ç¨‹åºæ‰§è¡Œç›‘è§†å¯çŸ¥ï¼Œåº•å±‚é€šè¿‡`execve`ç³»ç»Ÿè°ƒç”¨æ¥å¯åŠ¨ç›¸å…³è¿›ç¨‹ã€ç„¶åé€šè¿‡`/bin/sh`è¿›ç¨‹æ¥æ‰§è¡Œç›¸å…³æŒ‡ä»¤ï¼ˆæ­¤å¤„`echo`ä¸º`sh`å†…ç½®æŒ‡ä»¤ï¼‰ã€‚

```
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢/CodeDebug/php]
â””â”€# strace -f -e execve php -r "system('echo 111 &gt; shell.txt');"
execve("/usr/bin/php", ["php", "-r", "system('echo 111 &gt; shell.txt');"], 0x7ffd51277198 /* 53 vars */) = 0
strace: Process 3436 attached
[pid  3436] execve("/bin/sh", ["sh", "-c", "echo 111 &gt; shell.txt"], 0x562c96ef1eb0 /* 53 vars */) = 0
[pid  3436] +++ exited with 0 +++
--- SIGCHLD `{`si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=3436, si_uid=0, si_status=0, si_utime=0, si_stime=0`}` ---
+++ exited with 0 +++

â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢/CodeDebug/php]
â””â”€# ls
shell.txt

â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢/CodeDebug/php]
â””â”€#
```

åŒç†ï¼Œé’ˆå¯¹Windowså¹³å°ï¼šç³»ç»Ÿå‘½ä»¤`echo 111 &gt; shell.txt`ä¼ å…¥`CommandExecFunc`å‡½æ•°ï¼Œæœ€ç»ˆåœ¨åº•å±‚ç›¸å½“äºæ‰§è¡Œ`cmd.exe /c echo 111 &gt; shell.txt`ã€‚æˆåŠŸåˆ›å»ºæ–‡ä»¶`shell.txt`ã€æ‰§è¡Œè¿‡ç¨‹ç›¸å½“äºï¼šåœ¨`cmd`ç»ˆç«¯ä¸‹æ‰§è¡Œå‘½ä»¤`echo 111`ï¼Œå¹¶å°†echoç»“æœé€šè¿‡é‡å®šå‘ç¬¦å†™å…¥æ–‡ä»¶`shell.txt`ä¸­ã€‚ã€è¿›ç¨‹ç›¸å…³ï¼šä¸€ä¸ªè¿›ç¨‹`cmd.exe`ï¼Œåœ¨`cmd.exe`è¿›ç¨‹ä¸­æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œè€Œä¸æ˜¯æ‰§è¡Œç³»ç»Ÿç¨‹åºã€‘
<li>è·Ÿè¸ªä¸€ä¸‹ç¨‹åºæ‰§è¡Œæµç¨‹ï¼š`For Windows`
</li>
ä½¿ç”¨ODåŠ¨æ€è°ƒè¯•ï¼ŒåŠ è½½`php.exe`ç¨‹åºï¼Œå¯¹ç›¸å…³åˆ›å»ºè¿›ç¨‹çš„ç³»ç»ŸAPIä¸‹æ–­ç‚¹ï¼ˆå¦‚æœä¸çŸ¥é“æ˜¯é‚£ä¸ª`CreateProcess API`å¯ä»¥æŠŠæŸ¥è¯¢åˆ°çš„éƒ½è¿›è¡Œæ–­ç‚¹å³å¯ï¼‰

[![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC)](https://p2.ssl.qhimg.com/t0130d16f2d8a52df37.png)

æ–­ç‚¹ä¹‹åï¼ŒF9ä½¿ç¨‹åºè¿è¡Œè‡³ç”¨æˆ·äº¤äº’å¤„ï¼Œç„¶åè¾“å…¥PHPæ‰§è¡ŒæŒ‡ä»¤`system('echo 111 &gt; shell.txt');`

[![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC)](https://p1.ssl.qhimg.com/t01b77d9a800d810fd1.png)

è¿è¡ŒPHPæ‰§è¡ŒæŒ‡ä»¤åï¼Œç¨‹åºå¯åˆ°æ–­ç‚¹å¤„ï¼Œç„¶åé€šè¿‡è°ƒç”¨æ ˆå¯çŸ¥ï¼šåº•å±‚é€šè¿‡`CreateProcessW`ç³»ç»ŸAPIè°ƒç”¨æ¥å¯åŠ¨ç›¸å…³è¿›ç¨‹ã€ç„¶åé€šè¿‡`cmd`è¿›ç¨‹æ¥æ‰§è¡Œç›¸å…³æŒ‡ä»¤ï¼ˆæ­¤å¤„`echo`ä¸º`cmd`å†…ç½®æŒ‡ä»¤ï¼‰ï¼ˆæ³¨æ„ï¼šè¿™é‡Œä¹Ÿå¯æŸ¥çœ‹åˆ°PHPç¨‹åºçš„å®Œæ•´è°ƒç”¨é“¾ï¼‰

[![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC)](https://p2.ssl.qhimg.com/t01b29332be9bf746f2.png)

#### <a class="reference-link" name="Java"></a>Java

```
Java - åº•å±‚ä¸è°ƒç”¨ç³»ç»Ÿç»ˆç«¯ï¼Œè‡ªå·±å¯åŠ¨ä¼ å…¥çš„å¯æ‰§è¡Œç¨‹åº    Mode =&gt; Windowï¼šCommand || Linuxï¼šCommand
```

ä½†æ˜¯åœ¨`Java`è¯­è¨€é‡Œé¢ï¼Œé’ˆå¯¹Linuxå¹³å°ï¼Œç³»ç»Ÿå‘½ä»¤`echo 111 &gt; shell.txt`ä¼ å…¥`CommandExecFunc`å‡½æ•°ï¼Œæœ€ç»ˆåœ¨åº•å±‚ç›¸å½“äºæ‰§è¡Œ`/bin/echo 111 &gt; shell.txt`æˆåŠŸæ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²`"111 &gt; shell.txt"`å¹¶æ²¡æœ‰åˆ›å»ºæ–‡ä»¶`shell.txt`ã€‚ã€æ‰§è¡Œè¿‡ç¨‹ç›¸å½“äºï¼šè¿è¡Œå¯æ‰§è¡Œç¨‹åº`/bin/echo`å¹¶ä¼ å…¥å‚æ•°`111 &gt; shell.txt`è¿›è¡Œæ‰“å°è¾“å‡ºï¼Œè¿™é‡Œçš„ç‰¹æ®Šå­—ç¬¦`&gt;`è¢«å½“ä½œæ™®é€šå­—ç¬¦ä¸²è¢«echoç¨‹åºæ‰“å°ã€‚è¿™é‡Œçš„`echo`ä½œä¸ºå¯æ‰§è¡Œç¨‹åºå‡ºç°ï¼Œè€Œä¸æ˜¯ç»ˆç«¯ä¸­çš„å‘½ä»¤ã€‘ã€è¿›ç¨‹ç›¸å…³ï¼šä¸€ä¸ªè¿›ç¨‹`/bin/echo`ï¼Œåœ¨`/bin/echo`è¿›ç¨‹ä¸­ä¼ å…¥å­—ç¬¦ä¸²å‚æ•°`111 &gt; shell.txt`è¿›è¡Œæ‰“å°è¾“å‡ºã€‘ã€æœ‰å…³å¯æ‰§è¡Œç¨‹åºæ€ä¹ˆæŸ¥è¯¢ï¼šä»ç¯å¢ƒå˜é‡ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‘

æµ‹è¯•ä»£ç å¦‚ä¸‹

```
import org.apache.commons.io.IOUtils;

import java.lang.Runtime;

public class CommandExec1 `{`
    public static void main(String[] args) `{`
        try`{`

            String str = IOUtils.toString(Runtime.getRuntime().exec("whoami").getInputStream());
            System.out.println(str);
        `}`
        catch(Exception a)`{`
            System.out.println(a);    
        `}`
    `}`
`}`
```
<li>è·Ÿè¸ªä¸€ä¸‹ç¨‹åºæ‰§è¡Œæµç¨‹ï¼š`For Linux`
</li>
ç¨‹åºæ‰§è¡Œç›‘è§†æƒ…å†µï¼šä»ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾è¾“å…¥çš„æŒ‡ä»¤å¯æ‰§è¡Œç¨‹åºä½ç½®ï¼Œç„¶åç”±`execve`ç³»ç»Ÿè°ƒç”¨æ¥å¯åŠ¨ç›¸å…³ç¨‹åºè¿›ç¨‹ï¼ˆå¹¶æœªæ¶‰åŠç³»ç»Ÿç»ˆç«¯è°ƒç”¨ï¼‰ã€‚

```
â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢/CodeDebug/java]
â””â”€# strace -f -e execve java CommandExec1                       
execve("/usr/bin/java", ["java", "CommandExec1"], 0x7ffdb259ee90 /* 53 vars */) = 0
strace: Process 3923 attached
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true
[pid  3923] --- SIGSEGV `{`si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=NULL`}` ---
strace: Process 3924 attached
strace: Process 3925 attached
strace: Process 3926 attached
strace: Process 3927 attached
strace: Process 3928 attached
strace: Process 3929 attached
strace: Process 3930 attached
strace: Process 3931 attached
strace: Process 3932 attached
[pid  3932] execve("/mnt/hgfs/QSec/Pentest/Red-Team/\347\245\236\345\205\265\345\210\251\345\231\250/Windows/VSCode/VSCode-linux-x64/whoami", ["whoami"], 0x7ffd28368b80 /* 53 vars */) = -1 ENOENT (æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•)
[pid  3932] execve("/usr/local/sbin/whoami", ["whoami"], 0x7ffd28368b80 /* 53 vars */) = -1 ENOENT (æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•)
[pid  3932] execve("/usr/local/bin/whoami", ["whoami"], 0x7ffd28368b80 /* 53 vars */) = -1 ENOENT (æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•)
[pid  3932] execve("/usr/sbin/whoami", ["whoami"], 0x7ffd28368b80 /* 53 vars */) = -1 ENOENT (æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•)
[pid  3932] execve("/usr/bin/whoami", ["whoami"], 0x7ffd28368b80 /* 53 vars */) = 0
[pid  3932] +++ exited with 0 +++
[pid  3923] --- SIGCHLD `{`si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=3932, si_uid=0, si_status=0, si_utime=0, si_stime=0`}` ---
strace: Process 3933 attached
root

[pid  3931] +++ exited with 0 +++
[pid  3927] +++ exited with 0 +++
[pid  3924] +++ exited with 0 +++
[pid  3923] +++ exited with 0 +++
[pid  3933] +++ exited with 0 +++
[pid  3930] +++ exited with 0 +++
[pid  3929] +++ exited with 0 +++
[pid  3928] +++ exited with 0 +++
[pid  3926] +++ exited with 0 +++
[pid  3925] +++ exited with 0 +++
+++ exited with 0 +++

â”Œâ”€â”€(rootğŸ’€toor)-[~/æ¡Œé¢/CodeDebug/java]
â””â”€#
```

åŒç†ï¼Œé’ˆå¯¹Windowså¹³å°ï¼Œç³»ç»Ÿå‘½ä»¤`echo 111 &gt; shell.txt`ä¼ å…¥`CommandExecFunc`å‡½æ•°ï¼Œæœ€ç»ˆåœ¨åº•å±‚ç›¸å½“äºæ‰§è¡Œ`ç³»ç»Ÿç¯å¢ƒå˜é‡/echo.exe 111 &gt; shell.txt`æˆåŠŸæ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²`"111 &gt; shell.txt"`å¹¶æ²¡æœ‰åˆ›å»ºæ–‡ä»¶`shell.txt`ã€‚

ä½†æ˜¯ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™é‡Œæ‰§è¡Œä¸Šè¿°æŒ‡ä»¤ä¼šæŠ¥é”™ï¼Œå› ä¸ºWindowså¹³å°ï¼Œé»˜è®¤æƒ…å†µä¸‹ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ä¸å­˜åœ¨`echo.exe`å¯æ‰§è¡Œç¨‹åºï¼Œå¯¼è‡´æŒ‡ä»¤æ— æ³•æ­£å¸¸æ‰§è¡Œ

```
# æ— æ³•å®šä½echoå¯æ‰§è¡Œç¨‹åº
D:\QSec\Code-Audit\Tools\Java\Kits\RCE&gt;where echo
INFO: Could not find files for the given pattern(s).

D:\QSec\Code-Audit\Tools\Java\Kits\RCE&gt;where whoami
C:\Windows\System32\whoami.exe

D:\QSec\Code-Audit\Tools\Java\Kits\RCE&gt;

# æ‰§è¡ŒæŠ¥é”™
D:\QSec\Code-Audit\Tools\Java\Kits\RCE&gt;javac RuntimeRCE.java

D:\QSec\Code-Audit\Tools\Java\Kits\RCE&gt;java RuntimeRCE
java.io.IOException: Cannot run program "echo": CreateProcess error=2, The system cannot find the file specified

D:\QSec\Code-Audit\Tools\Java\Kits\RCE&gt;
```

#### <a class="reference-link" name="Python"></a>Python

```
Python - åº•å±‚è°ƒç”¨ç³»ç»Ÿç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤     Mode =&gt; Windowï¼šcmd.exe /c Command || Linuxï¼šsh -c Command
```

è€Œ`Python`è¯­è¨€ï¼Œå‘½ä»¤æ‰§è¡Œå‡½æ•°åº•å±‚åŸç†å®ç°åŒ`PHP`è¯­è¨€ã€‚

æ€»ç»“èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯ï¼Œå‘½ä»¤æ‰§è¡Œå‡½æ•°æ‰§è¡Œåˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»ï¼šä¼ å…¥çš„å‘½ä»¤ä»…ä»…ä½œä¸ºå¯æ‰§è¡Œç»ˆç«¯ä¸­çš„å‘½ä»¤æ‰§è¡Œï¼›å¦ä¸€ç±»ï¼šä¼ å…¥çš„å‘½ä»¤ä»…ä»…æ˜¯è¿è¡Œä¼ å…¥çš„å‘½ä»¤ä¸­çš„å¯æ‰§è¡Œç¨‹åºã€‚å¯¹è±¡ä¸åŒï¼Œä¸€ç±»ï¼šæ˜¯åº•å±‚è¯­è¨€ç³»ç»Ÿç»ˆç«¯å¸®æˆ‘ä»¬æ‰§è¡Œä¼ å…¥çš„å‘½ä»¤ï¼›å¦ä¸€ç±»ï¼šæ˜¯è‡ªå·±å¯åŠ¨ä¼ å…¥çš„å¯æ‰§è¡Œç¨‹åºã€‚



## å‚è€ƒé“¾æ¥
- [Build your own PHP on Windows](https://wiki.php.net/internals/windows/stepbystepbuild_sdk_2)
- [Visual Studio docs](https://visualstudio.microsoft.com/zh-hans/vs/)
- [Visual Studio Code docs](https://code.visualstudio.com/docs)
- [ã€ŠPHP 7åº•å±‚è®¾è®¡ä¸æºç å®ç°+PHP7å†…æ ¸å‰–æã€‹](https://item.jd.com/28435383700.html)
- [æ·±å…¥ç†è§£ PHP å†…æ ¸](https://www.bookstack.cn/books/php-internals)
- [WINDOWSä¸‹ç”¨VSCODEè°ƒè¯•PHP7æºä»£ç ](https://www.jianshu.com/p/29bc0443b586)
- [è°ƒå¼PHPæºç ](https://gywbd.github.io/posts/2016/2/debug-php-source-code.html)
- [ç”¨vscodeè°ƒè¯•phpæºç ](https://blog.csdn.net/Dont_talk/article/details/107719466)
- [GDB: The GNU Project Debugger](http://www.gnu.org/software/gdb)
- [CreateProcessW function](https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessw)
- [å‘½ä»¤æ³¨å…¥æˆå› å°è°ˆ](https://xz.aliyun.com/t/6542)
- [æµ…è°ˆä»PHPå†…æ ¸å±‚é¢é˜²èŒƒPHP WebShell](https://paper.seebug.org/papers/old_sebug_paper/pst_WebZine/pst_WebZine_0x05/0x07_%E6%B5%85%E8%B0%88%E4%BB%8EPHP%E5%86%85%E6%A0%B8%E5%B1%82%E9%9D%A2%E9%98%B2%E8%8C%83PHP_WebShell.html)
- [Program execution Functions](https://www.php.net/manual/en/ref.exec.php)
- [linuxç³»ç»Ÿè°ƒç”¨](http://huhaipeng.top/2019/04/20/linux%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/)
- [system calls](https://fedora.juszkiewicz.com.pl/syscalls.html)